"tosca_definitions_version: tosca_simple_yaml_1_2\ndescription: PaloAlto VNFD\n\nimports:\n  - cisco_nfv_sol001_types.yaml\n  - etsi_nfv_sol001_vnfd_0_10_0_types.yaml\n\nmetadata:\n  template_name: PaloAlto_VNFD\n  template_author: Cisco Systems\n  template_version: '1.0'\n\ndsl_definitions:\n  descriptor_id: &descriptor_id PALO_ALTO_FW\n  provider: &provider Cisco\n  product_name: &product_name PaloAlto\n  software_version: &software_version '1.0'\n  descriptor_version: &descriptor_version '1.0'\n  flavour_id: &flavour_id default\n  flavour_description: &flavour_description 'Default VNF Deployment Flavour'\n  vnfm: &vnfm '9:Cisco Elastic Services Controller:v04.04.01'\n\nnode_types:\n  cisco.PaloAlto.1_0.1_0:\n    derived_from: tosca.nodes.nfv.VNF\n    properties:\n      descriptor_id:\n        type: string\n        constraints: [ valid_values: [ *descriptor_id ] ]\n        default: *descriptor_id\n      provider:\n        type: string\n        constraints: [ valid_values: [ *provider ] ]\n        default: *provider\n      product_name:\n        type: string\n        constraints: [ valid_values: [ *product_name ] ]\n        default: *product_name\n      software_version:\n        type: string\n        constraints: [ valid_values: [ *software_version ] ]\n        default: *software_version\n      descriptor_version:\n        type: string\n        constraints: [ valid_values: [ *descriptor_version ] ]\n        default: *descriptor_version\n      flavour_id:\n        type: string\n        constraints: [ valid_values: [ *flavour_id ] ]\n        default: *flavour_id\n      flavour_description:\n        type: string\n        constraints: [ valid_values: [ *flavour_description ] ]\n        default: *flavour_description\n      vnfm_info:\n        type: list\n        entry_schema:\n          type: string\n        constraints: [ valid_values: [ *vnfm ] ]\n        default: [ *vnfm ]\n      configurable_properties:\n        type: tosca.datatypes.nfv.VnfConfigurableProperties\n        description: Describes the configurable properties of the VNF\n        required: false\n      lcm_operations_configuration:\n        type: cisco.datatypes.nfv.VnfLcmOperationsConfiguration\n    interfaces:\n      Vnflcm:\n        type: cisco.interfaces.nfv.Vnflcm\n    artifacts:\n\ntopology_template:\n###################\n# Template Inputs #\n###################\n  inputs:\n\n    VIM_FLAVOR:\n      description: VIM Flavour for VDUs\n      type: string\n      default: 'Palo_Alto_flavor'\n    IMAGE_NAME:\n      description: VIM Flavour for VDUs\n      type: string\n      default: 'PA-VM-KVM'\n    VIM_FLAVOR_VCPU:\n      description: PA-VM node - number of vCPUs\n      type: integer \n      default: 8      \n    VIM_FLAVOR_MEM:\n      description: PA-VM node - RAM size (GB)\n      type: scalar-unit.size \n      default: 18 GB\n      \n    PA_NODE_HOSTNAME:\n      description: Hostname of PA node VM\n      type: string\n      default: 'PaloAlto'\n    \n    BOOTUP_TIME:\n      description: The time to wait before expecting bootup to be complete\n      type: integer\n      default: '600'\n      \n    TIMEZONE:\n      description: Provider timezone to be set on virtual machines\n      type: string\n      default: 'Asia/Manila'\n\n    DOMAIN_NAME:\n      description: Provider domain name to be set on virtual machines\n      type: string\n      default: 'smart.com.ph'\n    \n    SECURITY_GROUP0:\n      description: security group name applied for the order0 vducp\n      type: string\n      default: 'default'\n      \n    DNS_SERVER:\n      description: Provider timezone to be set on virtual machines\n      type: string\n      default: '8.8.8.8'\n\n    PAN_SERVER:\n      description: Provider domain name to be set on virtual machines\n      type: string\n      default: '10.155.10.11'\n    \n    AUTH_KEY:\n      description: security group name applied for the order0 vducp\n      type: string\n      default: '382996013733054'\n\n########################\n# Substitution Mapping #\n########################\n  substitution_mappings:\n    node_type: cisco.PaloAlto.1_0.1_0\n    requirements:\n      - virtual_link: [ int-mgmt, virtual_link ]\n      - virtual_link: [ int-east, virtual_link ]\n      - virtual_link: [ int-west, virtual_link ]\n\n##########\n# Nodes: #\n##########\n  node_templates:\n\n#####################\n# VNF configuration #\n#####################\n    vnf:\n      type: cisco.PaloAlto.1_0.1_0\n      properties:\n        flavour_id: default\n        flavour_description: 'Default VNF Deployment Flavour'\n        descriptor_id: PALO_ALTO_FW\n        descriptor_version: '1.0'\n        provider: Cisco\n        product_name: PaloAlto\n        software_version: '1.0'\n        product_info_name: 'PaloAlto'\n        vnfm_info:\n          - '9:Cisco Elastic Services Controller:v04.04.01'\n        configurable_properties:\n          is_autoscale_enabled: false\n          is_autoheal_enabled: false\n        lcm_operations_configuration:\n          heal:\n            causes:\n              - 'recovery_action: REBOOT_THEN_REDEPLOY'\n              - 'recovery_wait_time: 30'\n\n#####################\n# VDU configuration #\n#####################\n    firewall:\n      type: cisco.nodes.nfv.Vdu.Compute\n      properties:\n        name: { get_input: PA_NODE_HOSTNAME }\n        description: 'Vdu1 of an active:standby (1:1) redundant pair of CF VMs.'\n        configurable_properties:\n          additional_vnfc_configurable_properties:\n            vim_flavor: { get_input: VIM_FLAVOR }\n            bootup_time: { get_input: BOOTUP_TIME }\n            vm_name_override: { get_input: PA_NODE_HOSTNAME }           \n        vdu_profile:\n          min_number_of_instances: 1\n          max_number_of_instances: 1\n        sw_image_data:\n          name: { get_input: IMAGE_NAME }\n          version: '1.0'\n          checksum: 9af30fce37a4c5c831e095745744d6d2\n          container_format: bare\n          disk_format: qcow2\n          min_disk: 2 GB\n          size: 2 GB\n        kpi_data:\n          VM_ALIVE-1:\n            event_name: 'VM_ALIVE-1'\n            metric_value: 1\n            metric_cond: 'GT'\n            metric_type: 'UINT32'\n            metric_occurrences_true: 1\n            metric_occurrences_false: 10\n            metric_collector:\n              type: 'ICMPPing'\n              nicid: 0\n              address_id: 0\n              poll_frequency: 30\n              polling_unit: 'seconds'\n              continuous_alarm: false\n        admin_rules:\n          VM_ALIVE-1:\n            event_name: 'VM_ALIVE-1'\n            action:\n              - 'ALWAYS log'\n              - 'FALSE recover autohealing'\n              - 'TRUE esc_vm_alive_notification'\n        vendor_section:\n          cisco_esc:\n            config_data:\n              /config/init-cfg.txt:\n                file: ../Files/Scripts/init-cfg.txt\n                variables:\n                  hostname: { get_input: PA_NODE_HOSTNAME }\n                  dnsserver: { get_input: DNS_SERVER }\n                  panserver: { get_input: PAN_SERVER }\n                  vimauthkey: { get_input: AUTH_KEY }\n                template_engine: VELOCITY\n      capabilities:\n        virtual_compute:\n          properties:\n            virtual_cpu:\n              num_virtual_cpu: { get_input: VIM_FLAVOR_VCPU }\n            virtual_memory:\n              virtual_mem_size: { get_input: VIM_FLAVOR_MEM }\n      artifacts:\n        sw_image:\n            type: tosca.artifacts.nfv.SwImage\n            file: paloalto\n\n######################################\n# Connection points for \"vdu_node_1\" #\n######################################\n    int-mgmt:\n      type: cisco.nodes.nfv.VduCp\n      properties:\n        layer_protocols: [ ipv4 ]\n        protocol:\n          - associated_layer_protocol: ipv4\n        trunk_mode: false\n        order: 0\n        management: true\n        iface_type: virtual\n      requirements:\n        - virtual_binding: firewall\n\n    int-west:\n      type: cisco.nodes.nfv.VduCp\n      properties:\n        layer_protocols: [ ipv4 ]\n        protocol:\n          - associated_layer_protocol: ipv4\n        trunk_mode: false\n        order: 1\n        management: false\n        iface_type: virtual\n      requirements:\n        - virtual_binding: firewall\n    \n    int-east:\n      type: cisco.nodes.nfv.VduCp\n      properties:\n        layer_protocols: [ ipv4 ]\n        protocol:\n          - associated_layer_protocol: ipv4\n        trunk_mode: false\n        order: 2\n        management: false\n        iface_type: virtual\n      requirements:\n        - virtual_binding: firewall\n    \n\n\n########################\n# Policy configuration #\n########################\n  policies:\n    - scaling_aspects:\n        type: tosca.policies.nfv.ScalingAspects\n        properties:\n          aspects:\n            default_sa:\n              name: 'default_sa'\n              description: 'default scaling aspect'\n              max_scale_level: 0\n\n    - instantiation_levels:\n        type: tosca.policies.nfv.InstantiationLevels\n        properties:\n          levels:\n            default:\n              description: 'Default instantiation level'\n              scale_info:\n                default_sa:\n                  scale_level: 0\n          default_level: default\n\n######\n# VM #\n######\n    - ovs_security_group0:\n        type: cisco.policies.nfv.SecurityGroupRule\n        properties:\n          group_name: { get_input: SECURITY_GROUP0 }\n        targets: [ int-mgmt ]\n    - vdu_scaling_aspect_deltas:\n        type: tosca.policies.nfv.VduScalingAspectDeltas\n        properties:\n          aspect: default_scaling_aspect\n          deltas:\n            delta_1:\n              number_of_instances: 1\n        targets: [ firewall ]\n    - vdu_initial_delta:\n        type: tosca.policies.nfv.VduInitialDelta\n        properties:\n          initial_delta:\n            number_of_instances: 1\n        targets: [ firewall ]\n\n    - vdu_instantiation_levels:\n        type: tosca.policies.nfv.VduInstantiationLevels\n        properties:\n          levels:\n            default:\n              number_of_instances: 1\n        targets: [ firewall ]\n"